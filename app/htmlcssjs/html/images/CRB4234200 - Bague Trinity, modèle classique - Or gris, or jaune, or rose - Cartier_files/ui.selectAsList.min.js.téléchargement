define("ui.selectAsList",["ytos.domlib","ui.ajaxForm"],function(a){return yTos.utils.namespace("yTos.helpers.UI.SelectAsList"),yTos.helpers.UI.SelectAsList=yTos.helpers.base.extend({name:"ui.selectAsList",initialize:function(){var b=this._getStoreConfiguration();return this.notify("yTos::HelperLoaded::"+this.name,this),!!b.enableBeautify&&(!(!this.$el.is("select")&&0===this.$el.find("select").length)&&void window.require(["vendor.selectize"],function(){"function"==typeof a.fn.selectize&&(this.$el.is("select")?"undefined"==typeof this.$el.data("ytos-dropdown")&&this._beautify(this.$el):this.$el.find("select").each(function(b,c){var d=a(c);"undefined"==typeof d.data("ytos-dropdown")&&this._beautify(d)}.bind(this)))}.bind(this),function(a){yTos.debug.log("Failed loading javascript file:"+a.originalError.currentTarget.src)}))},_getStoreConfiguration:function(){try{return yTos.configuration.ui.selectize||{}}catch(a){return{}}},_beautify:function(b){var c=this,d={plugins:["preserve_original_select","programmatic_focus_without_opening_select"],openOnFocus:!0,allowEmptyOption:!0,sortField:{field:"text",direction:"asc"},onInitialize:function(){var a=b.get(0).selectize;a.refreshOptions(!1),b.data("ytos-dropdown",{$el:b,selectize:a,set:c.set.bind(c),get:c.get.bind(c),toggle:c.toggle.bind(c),update:c.update.bind(c),addOptions:c.addOptions.bind(c),removeOptions:c.removeOptions.bind(c)}),b.trigger("yTos.beautified")},onChange:function(a){try{yTos.helpers.UI.AjaxForm.validateInput(this.$input)}catch(b){yTos.debug.log(b)}}},e=(b.data("selectizeSettings")||{}).config,f=a.extend(!0,{},d,this._getStoreConfiguration(),e);b.selectize(f)},_toArray:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},get:function(a){var b=a.data("ytos-dropdown");if("undefined"!=typeof b){var c=this._toArray(b.selectize.options);return $Y.where({value:b.selectize.getValue()},c)[0]||{}}},set:function(a,b){var c=a.data("ytos-dropdown");"undefined"!=typeof c&&(c.selectize.setValue(b),this.notify("yTos::SelectAsList::OptionSelected",{$el:a,newValue:b}))},toggle:function(a,b){var c=a.data("ytos-dropdown");if("undefined"!=typeof c){if(b)return void c.selectize.enable();c.selectize.disable()}},update:function(a){var b=a.data("ytos-dropdown");"undefined"!=typeof b&&(b.selectize.refreshOptions(!1),this.notify("yTos::SelectAsList::OptionListUpdated",{$el:a}))},addOptions:function(a,b){var c=a.data("ytos-dropdown");"undefined"!=typeof c&&(c.selectize.addOption(b),this.update(a))},removeOptions:function(a,b,c){var d=a.data("ytos-dropdown");if("undefined"!=typeof d){var e,f;if("undefined"!=typeof b){e=d.get(a)||{},d.selectize.removeOption(b);var g=!c||"undefined"==typeof c;b.toString()===e.value&&g&&(f=$Y.where({$order:1},this._toArray(d.selectize.options))[0]||{},d.set(a,f.value))}else d.selectize.clearOptions();this.update(a)}}}),$Y.notify("yTos::HelperParsed::ui.selectAsList",yTos.helpers.UI.SelectAsList),yTos.helpers.UI.SelectAsList});