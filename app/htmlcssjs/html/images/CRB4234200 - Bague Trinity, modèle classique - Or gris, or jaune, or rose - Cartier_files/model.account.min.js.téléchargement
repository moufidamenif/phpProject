define("ytos.account",[],function(){yTos.utils.namespace("yTos.plugins.Account");var a;return yTos.plugins.Account=function(){return new(a=yTos.models.base.extend({initialize:function(){},defaults:{},globalMessages:{"yTos::Account::ReadyToLogout":"userLogout"},trackingHandlers:{"yTos::Account::RegistrationSuccess":function(){var a="thankyou"===yTos.navigation.Controller.toLowerCase()?"SendForm":"RegistrationFull";yTos.tracking.trackEvent({event:a,label:"OK"})},"yTos::Account::RegistrationError":function(){var a="thankyou"===yTos.navigation.Controller.toLowerCase()?"SendForm":"RegistrationFull";yTos.tracking.trackEvent({event:a,label:"Error"})},"yTos::Account::ItemsAddedToWishList":function(a){yTos.tracking.trackEvent({event:"AddToWishList",label:a.itemData.code10,value:a.itemData.size})},"yTos::Account::ErrorAddingItemToWishList":function(){yTos.tracking.trackEvent({event:"AddToWishList",label:"Error"})},"yTos::Account::EditPersonalDataSuccess":function(){yTos.tracking.trackEvent({event:"RecoveryPassword"})},"yTos::Account::UserLoggedIn":function(a){yTos.tracking.trackEvent({event:"Login",label:"Ok"})},"yTos::Account::UserLoginFail":function(){yTos.tracking.trackEvent({event:"Login",label:"Error"})},"yTos::Account::UserLoggedOut":function(a){yTos.tracking.trackEvent({event:"Logout",label:"Ok"})},"yTos::Account::UserLoggingOut":function(a){function b(){c||(c=!0,$Y.notify("yTos::Account::UserFinishedLogginOut"))}window.setTimeout(b,1e3);var c=!1;yTos.tracking.trackEvent({event:"Logout",label:"Ok",hitCallback:b})},"yTos::Account::UserLogoutError":function(){yTos.tracking.trackEvent({event:"Logout",label:"Error"})}},userLogout:function(a){yTos.ajax("/yTos/Plugins/AccountPlugin/LogoutAsync",{success:function(b){a.redirectAfterLogout?($Y.watch({"yTos::Account::UserFinishedLogginOut":function(){$Y.redirect(b.redirectUrl)}}),this.notify("yTos::Account::UserLoggingOut")):this.notify("yTos::Account::UserLoggedOut")}.bind(this),error:function(){this.notify("yTos::Account::UserLogoutError")}.bind(this)})}}))}(),yTos.models.AccountCollection=yTos.helpers.createCollection(a,"account"),yTos.plugins.Account});