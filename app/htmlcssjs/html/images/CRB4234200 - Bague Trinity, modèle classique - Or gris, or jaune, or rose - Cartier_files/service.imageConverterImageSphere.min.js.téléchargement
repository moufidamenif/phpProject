define(["imageConverterConfig"],(function(t){function i(){this.formats=t.formats,this.commands=[]}return i.prototype={init:function(t,i,n,o,s){return this.config=t,this.commands=[],this.base=i,this.code10=n,this.shotType=this.getShotType(o),this.imageExtension=s,this},addCommand:function(t,i){this.config&&this.config[i]&&this.commands.push(t+this.config[i])},getShotType:function(t){const i=t.split("_");return i.length?i[1].toLowerCase():"f"},setWidth:function(){return this.addCommand("w","Width"),this},setBackgroundColor:function(){return this.addCommand("b","BgColor"),this},setQuality:function(){return this.addCommand("q","Quality"),this},setFormat:function(){return this.config.ImageFormat&&(this.imageExtension=this.formats[this.config.ImageFormat]),this},toString:function(){const t=this.commands.join("_");return this.base+this.code10+"/"+this.shotType+"/"+t+"."+this.imageExtension},getSrc:function(t,i,n,o,s,e){return this.init(n,t,o,s,e).setWidth().setBackgroundColor().setQuality().setFormat().toString()}},new i}));