!function(O,F,_){function o(){}var u={consentCheck:!0,kwebstatUrl:"https://ks1.invibes.com",statwebUrl:"https://s1.videostep.com",uwebDomain:"https://u1.videostep.com/User",sewebUrl:"https://invibes.b26net.com",ewebUrl:"https://paid1.invibes.com",cdnPath:"https://static1.r66net.com/adv/"},a=_.PS=_.PS||{},D=_.moduleRan=_.moduleRan||{},V=_.IntegrationTypes={Script:0,Safeframe:1,Amp:2},d={Mode1:1,Mode2:2,Mode3:3},r=_.consentResponse={NOCALL:0,OPTOUTCALL:1,OPTINCALL:2},R=(_.purposes=_.purposes||[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],_.legitimateInterests=_.legitimateInterests||[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],_.everyPurpose=function(){for(var e=_.purposes.length<=10?_.purposes.length:10,t=0;t<e;t++)if(0==_.purposes[t])return!1;return!0},{Redirect:"Redirect",UrlParam:"UrlParam"});if(_.alreadyRun)console.warn("IVBS Script run twice!");else{var t=!(_.alreadyRun=!0);try{t=localStorage&&localStorage.InvibesDEBUG}catch(e){}function M(e){this.startTime=0,this.running=!1,this.elapsed=void 0,this.start=function(){e&&O.requestAnimationFrame(e),this.running||(this.startTime=+new Date-this.elapsed||+new Date,this.elapsedTime=void 0,this.running=!0)},this.stop=function(){this.running&&(this.elapsed=+new Date-this.startTime,this.running=!1)},this.getElapsedTime=function(){return this.running?+new Date-this.startTime:this.elapsed},this.isRunning=function(){return this.running},this.reset=function(){this.startTime=+new Date,this.elapsed=0}}function x(n){return{sendAdvertiserEvent:function(e,t){if(_.placementVisitId&&"undefined"!==_.placementVisitId)return e={eventType:e,additionalInfo:t,location:U.locationHref,cacheb:Date.now(),PlacementVisitId:_?.placementVisitId??0,vId:a.visitId,lId:a?.dom?.id??null},null!=n.ivwdg&&(e.wdgToken=n.ivwdg),t=u.kwebstatUrl+"/Stat/RegisterAdvertiserEvent",N.jsonpWithParams(t,e)}}}function z(n){return{sendAdvertiserEvent:function(e,t){e={eventType:e,additionalInfo:t,location:U.locationHref,cacheb:Date.now(),ir:A.isInvibesReferrer,vId:a.visitId,lId:a?.dom?.id??null,PlacementVisitId:_?.placementVisitId??0},null!=n.ivwdg&&(e.wdgToken=n.ivwdg),e.ir&&(e.additionalInfo=e.additionalInfo?e.additionalInfo+"|"+A.invibesReferrerDetectionMethod:A.invibesReferrerDetectionMethod),e.ConsentType=L.consent,e.HasConsent=L.canGenerateCdid(),t=u.kwebstatUrl+"/Stat/PixelAve";return N.pixel(t,e)},domain:N.getRootDomain}}var n,j,c,W,i,s,q,G,l,Q,J,K,Z,X,$,Y,ee,v,te,ne,ie,re,f,p,oe,se,ae,m,de,g,ce,h,b,le,ue,y,ve,fe,pe,I,me,ge,he,be,ye,Ie,Ee,E,Ce,we,Ae,C,Pe,Se,Le,w,B=t?O.console:{info:o,error:o,log:o,warn:o,debug:o},U=(B.logWithTimestamp=function(e){B.log((new Date).getTime()+": "+e||"-")},t&&B.info("IV DEBUG ON."),_.headerHeight=_.headerHeight||0,_.footerHeight=_.footerHeight||0,adDoc=O.document,adWndw=O,{get integrationType(){return V.Script},get requestAdCategories(){return _adCategory},set requestAdCategories(e){_adCategory=e},get adContainerIds(){return null==_adContainerIds&&(_adContainerIds=[],(_adCategory&AdCategories.INFEED)==AdCategories.INFEED&&_adContainerIds.push(_infeedDiv),(_adCategory&AdCategories.NATIVE)==AdCategories.NATIVE&&_adContainerIds.push(_nativeDiv)),_adContainerIds},setAdContainerIds:function(e){_adContainerIds=e},get locationHref(){{if(n)return n;let t=O;try{for(;top!==t;)t.parent.location.href.length&&(t=t.parent);n=t.location.href}catch(e){n=-1<t.document.referrer.indexOf(u.sewebUrl)?t.location.href:t.document.referrer}return n}},get referrer(){return function(){var e=O;try{for(;top!==e;)e.parent.location.href.length&&(e=e.parent)}catch(e){}return e}().document.referrer},get windowWidth(){return top.window.innerWidth},get windowHeight(){return top.window.innerHeight},get supportsSticky(){return!0},get supportsFullscreen(){return!0},getVerticalVisibilityPercent:function(e){if(e.forcedVisibilityPercent)return e.forcedVisibilityPercent;var e=e.getBoundingClientRect(),t=Math.max(_.headerHeight,e.top),n=Math.min(O.innerHeight-_.footerHeight,e.bottom);return e.height<1?0:Math.max(0,Math.round(100*(n-t)/e.height))},isInViewPort:function(e){if(!e)return!1;var t=_.headerHeight,n=O.innerHeight-_.footerHeight,e=e.getBoundingClientRect();return e.top>t&&e.top<n||e.bottom>t&&e.bottom<n||e.top<=t&&e.bottom>=n},parseUrlParams:function(){return N.parseQueryStringParams()},getBoundingClientRect:function(e){return e.getBoundingClientRect()},topQuerySelector:function(e,t){t(F.querySelector(e))},requestResize:function(){return null}}),N=(j=function(e){return{"invibes.adDiv.getBoundingClientRect\\(\\)":'invibes.IntegrationManager.getBoundingClientRect(invibes.adManagers["'+e+'"].adDiv)',"invibes.adDiv":'invibes.adManagers["'+e+'"].adDiv',"invibes.currentAd":'invibes.adManagers["'+e+'"].currentAd',"invibes.initializeAllOutgoingLinks":'invibes.adManagers["'+e+'"].initializeAllOutgoingLinks',"invibes.getClientVerticalVisibilityPercent":"invibes.IntegrationManager.getVerticalVisibilityPercent","window.innerHeight":"invibes.IntegrationManager.windowHeight","invibes.addVideoTracking":'invibes.adManagers["'+e+'"].addVideoTracking','invibes.addEventListener\\("view"':'invibes.adManagers["'+e+'"].addEventListener("view"','invibes.addEventListener\\("beforeEngagement"':'invibes.adManagers["'+e+'"].addEventListener("beforeEngagement"'}},{getDocumentLocation:function(){return U.locationHref.substring(0,300).split(/[?#]/)[0]},extractHostname:function(e){return null==e?"":(-1<e.indexOf("//")?e.split("/")[2]:e.split("/")[0]).split(":")[0].split("?")[0]},getRootDomain:function(){for(var e=F.createElement("a"),t=(e.href=U.locationHref,e.hostname),n=["co.uk","co.za","co.jp","com.mt","com.fr","com.es","org.uk","gov.uk","gouv.fr"],i=0;i<n.length;i++){var r,o=n[i];if(t.includes(o))return(r=t.split("."))[r.length-3]+"."+o}return t.split(".").reverse().splice(0,2).reverse().join(".")},setLocation:function(e){top.window.location=e},isDocumentReady:function(){return/complete|loaded|interactive/.test(F.readyState)},addQueryStringParam:Oe,addParamsToUrl:Fe,parseQueryStringParams:function(e){e=e||O.location.href;var t={};try{t=JSON.parse(localStorage.ivbs)}catch(e){}for(var n,i=/[\\?&#]([^=]+)=([^\\?&#]+)/g;null!=(n=i.exec(e));)n.index===i.lastIndex&&i.lastIndex++,t[n[1].toLowerCase()]=n[2];return t},generateRandomId:xe,generateUserId:function(){function e(){return Math.floor(Math.random()*t).toString(36)}var t=parseInt("zzzzzz",36);return e()+e()},replaceTimestamp:function(e){return null==e?e:e.replace(/\[timestamp\]/g,(new Date).getTime())},jsonpWithParams:function(e,t,n){var i;e=Fe(e,t),t=n,n="cb_"+xe(),(i=F.createElement("script")).src=Oe(e,"callback","invibes."+n),_[n]=t||o,F.head.appendChild(i)},pixel:function(n,i){var r=new Image;return new Promise(function(e,t){r.addEventListener("load",e),r.addEventListener("error",t),r.src=Fe(n,i)})},setInnerHtmlWithScripts:function(e,t,n,i){e.innerHTML=t;function r(e){var t=e.shift();t?(t.parent.appendChild(t.script),t.script.src?t.script.onload=function(){r(e)}:r(e)):n&&n()}var t=e.querySelectorAll("script"),o=[];Array.prototype.forEach.call(t,function(t){var e=t.parentElement,n=(e.removeChild(t),F.createElement("script"));"id|type|src|textContent".split("|").forEach(function(e){t[e]&&(n[e]=t[e])}),null!=i&&(n.setAttribute(_divAttributeName,i),n.textContent=_e(n.textContent,i)),o.push({script:n,parent:e})}),r(o)},addScript:function(e,t,n){var i=F.createElement("script");i.type="text/javascript",null!=n&&(t=_e(t,n)),i.setAttribute(_divAttributeName,n),i.text=t,e.appendChild(i)},cloneObj:function(t){var n={};return Object.keys(t).filter(function(e){return t.hasOwnProperty(e)}).forEach(function(e){n[e]=t[e]}),n}}),A=(_.FullscreenApi=(c=null,function(){function d(){null!==c&&(c.recentlyChanged=!0,clearTimeout(s),s=setTimeout(function(){c.recentlyChanged=!1},100))}function t(){function t(e){e.preventDefault()}function n(){function t(){var e=U.getBoundingClientRect(r);e.height<1?adWndw.setTimeout(t,50):(n.style.width=e.width+"px",n.style.height=e.height+"px",n.style.left=e.left,n.style.right=e.right,n.style.position=r.style.position||o,n.style.zIndex=r.style.zIndex)}var n=adDoc.createElement("div");return n.style.display="none",n.classList.add("ivbsFullscreenPlaceholder"),t(),r.parentElement.insertBefore(n,r),{hide:function(){n.style.display="none"},show:function(){n.style.display="block"},el:n}}var i,r=null,o="relative",s=function(e){e?adDoc.addEventListener("touchmove",t,{passive:!1}):adDoc.removeEventListener("touchmove",t,{passive:!1})},a={requestFullscreen:function(t){d(),r=t,i=n(),r.parentElement.removeChild(r),(t=adDoc.createElement("div")).style.zIndex="2147483647",t.style.position="fixed",t.style.width="100%",t.style.height="100%",t.style.top="0",t.style.bottom="0",t.style.left="0",t.style.right="0",t.appendChild(r),adDoc.body.appendChild(t),adDoc.body.classList.add("ivbsNoScroll"),s(!0),r.style.height="100%",r.style.width="auto",r.style.left="0",r.style.right="0",a.dispatchEvent("fullscreenchange",null),a.onfullscreenchange&&a.onfullscreenchange(e)},exitFullscreen:function(){var t;d(),(t=r.parentElement).removeChild(r),i.el.parentElement.insertBefore(r,i.el),adDoc.body.removeChild(t),adDoc.body.classList.remove("ivbsNoScroll"),s(!1),r.style.height=i.el.height,r.style.width=i.el.width,r.style.left=i.el.left,r.style.right=i.el.right,r.style.position=i.el.position,r.style.zIndex=i.el.zIndex,i=r=null,a.dispatchEvent("fullscreenchange",null),a.onfullscreenchange&&a.onfullscreenchange(e)},isFullscreen:function(){return null!==r},onfullscreenchange:void 0};return H(a),a}var n,i,r,o,s=null;if(null===c){if(0==U.supportsFullscreen)return B.warn("IVBS: Fullscreen configured but cannot run in this integration context"),null;n=void 0!==adDoc.documentElement.requestFullscreen?"requestFullscreen":void 0!==adDoc.documentElement.mozRequestFullScreen?"mozRequestFullScreen":void 0!==adDoc.documentElement.webkitRequestFullscreen?"webkitRequestFullscreen":void 0!==adDoc.documentElement.webkitRequestFullScreen?"webkitRequestFullScreen":void 0!==adDoc.documentElement.msRequestFullscreen?"msRequestFullscreen":void 0,i=void 0!==adDoc.exitFullscreen?"exitFullscreen":void 0!==adDoc.mozCancelFullScreen?"mozCancelFullScreen":void 0!==adDoc.webkitExitFullscreen?"webkitExitFullscreen":void 0!==adDoc.webkitExitFullScreen?"webkitExitFullScreen":void 0!==adDoc.msExitFullscreen?"msExitFullscreen":void 0,r=void 0!==adDoc.onfullscreenchange?"fullscreenchange":void 0!==adDoc.onmozfullscreenchange?"mozfullscreenchange":void 0!==adDoc.onwebkitfullscreenchange?"webkitfullscreenchange":void 0!==adDoc.onmsfullscreenchange?"MSFullscreenChange":void 0,c=void 0!==n&&void 0!==i&&void 0!==r?(H(o={requestFullscreen:function(t){d(),t[n](),r||o.dispatchEvent("fullscreenchange",e)},exitFullscreen:function(){d(),adDoc[i](),r||o.dispatchEvent("fullscreenchange",e)},isFullscreen:function(){return null!=adDoc.fullscreenElement||(null!=adDoc.webkitFullscreenElement||(null!=adDoc.webkitFullScreenElement||(null!=adDoc.mozFullScreenElement||null!=adDoc.msFullscreenElement)))},onfullscreenchange:void 0}),adDoc.addEventListener(r,function(e){o.dispatchEvent("fullscreenchange",e),o.onfullscreenchange&&o.onfullscreenchange(e)}),o):t()}return c}),_.visibilityAPI=(t="",void 0!==adDoc.hidden?(W="hidden",t="visibilitychange"):void 0!==adDoc.mozHidden?(W="mozHidden",t="mozvisibilitychange"):void 0!==adDoc.msHidden?(W="msHidden",t="msvisibilitychange"):void 0!==adDoc.webkitHidden&&(W="webkitHidden",t="webkitvisibilitychange"),{eventName:t,isVisible:function(){return!(!_.FullscreenApi()||!_.FullscreenApi().recentlyChanged)||!adDoc[W]}}),(new function(){function e(){i&&1==i()&&(r.stop(),n+=r.getElapsedTime(),r.reset()),k.sendKwebStatStats(1026,n)}function t(){var e=i();1==e?r.start():(r.stop(),n+=r.getElapsedTime(),r.reset())}var n,i,r=new M;return{start:function(){n=0,_.visibilityAPI&&(i=_.visibilityAPI.isVisible||function(){return!0},adDoc.addEventListener(_.visibilityAPI.eventName,t),i()&&r.start()),O.addEventListener("beforeunload",e)},stop:function(){adDoc.removeEventListener(_.visibilityAPI.eventName,t),O.removeEventListener("beforeunload",e)}}}).start(),Q=l=!(G={}),J=new M,K=function(t){return new Promise(function(e){O.setTimeout(function(){e()},t)})},Z=function(e){var t=null;switch(e){case 2:t=!0;break;case 3:if(null!==(t=!1)){for(var n=0;n<_.purposes.length;n++)_.purposes[n]=t;L.updateConsent(1==t?1:0)}}},X=function(i){return new Promise((e,t)=>{const n=F.createElement("script");n.type="text/javascript",n.text=i,n.onload=()=>e(),F.body.appendChild(n)})},$=function(){return new Promise(function(e,t){var n="?id="+Math.floor(1e5*Math.random()),i=P.detectTopMostDomain()||N.getRootDomain(),i=(i.startsWith(".")&&(i=i.slice(1)),u.cdnPath+i+".json"+n);try{var r=new XMLHttpRequest;r.onreadystatechange=function(){4==this.readyState&&200==this.status&&e(JSON.parse(r.responseText))},r.open("GET",i),r.send()}catch(e){t(e)}})},{startAnalytics:function(){U.referrer&&(e=U.referrer,/paid(\d+)?\.invibes.com/.test(e))&&(l=!0,_invibesReferrerDetectionMethod=R.Redirect);var e,n=Be();i=new z(n),_.widgetStats=i,O.setTimeout(function(){i.sendAdvertiserEvent(1006)},2e3),O.setTimeout(function(){i.sendAdvertiserEvent(1007)},1e4),O.setTimeout(function(){i.sendAdvertiserEvent(1012)},3e4),O.setTimeout(function(){i.sendAdvertiserEvent(1013)},6e4),Ue().then(function(){t=n;var e,t=0!=(e=Object.keys(t).filter(function(e){return-1<e.indexOf("utm")})).length?(e.sort(),t[e[0]]):null;k.sendKwebStatStats(5,t),Q=!0,Te(),null!=n.ivwdg&&void 0!==Re&&new Re(i,n.ivwdg).run()})},startAnalyticsLightConf:function(){var e;!0!==_.lConfAlreadyRun&&(_.lConfAlreadyRun=!0,e=Be(),_.placementVisitId=e?.placementvisitid?decodeURI(e.placementvisitid):0,a.visitId=a.visitId||N.generateRandomId(),s=new x(e),_.UveStats=s,J.start(),O.setTimeout(function(){s.sendAdvertiserEvent(1030)},2e3),O.setTimeout(function(){s.sendAdvertiserEvent(1032)},1e4),O.setTimeout(function(){s.sendAdvertiserEvent(1033)},3e4),O.setTimeout(function(){s.sendAdvertiserEvent(1034)},6e4),s.sendAdvertiserEvent(1031))},get isInvibesReferrer(){return l},set isInvibesReferrer(e){l=l||e},get invibesReferrerDetectionMethod(){return _invibesReferrerDetectionMethod}}),ke=(A.startAnalyticsLightConf(),new function(){var t=!1,n=[];this.set=function(){for(t=!0;0<n.length;)n.shift().callback()},this.add=function(e){t?e():n.push({callback:e})}}),P=(v="ivbsTestCD",te={setCookie:ze,getCookie:Ne,detectTopMostDomain:je,get cookieDomain(){return void 0===ee&&(ee=je(),B.info("IVBS: cd:"+ee)),ee}}),Te=function(){var t,e;1!=a.visitPixelSent&&(t=u.kwebstatUrl+"/conf.png",(e={c:N.getRootDomain(),ir:A.isInvibesReferrer,HasConsent:L.canGenerateCdid(),vId:a.visitId,lId:a?.dom?.id??null}).ir&&(e.additionalInfo=A.invibesReferrerDetectionMethod),N.pixel(t,e).then(function(){a.visitPixelSent=!0}).catch(function(e){B.info("IVBS: error loading VisitPixel with url  "+t+"because of "+e)}))},S=(_.SetCustomAction=function(e){var t,n;null==e&&(e="ivbsAction"),null!=a.actionSent&&1==a.actionSent[e]||(t=u.kwebstatUrl+"/action.png?",(n={c:N.getRootDomain(),a:e,ir:A.isInvibesReferrer,HasConsent:L.canGenerateCdid(),vId:a.visitId,lId:a?.dom?.id??null}).ir&&(n.a=n.a?n.a+"|"+A.invibesReferrerDetectionMethod:A.invibesReferrerDetectionMethod),N.pixel(t,n).then(function(){null==a.actionSent&&(a.actionSent={}),a.actionSent[e]=!0}).catch(function(e){B.info("IVBS: error loading ActionPixel with url "+t+"because of "+e)}))},ne=["VsLLocal","IvbsCampIdsLocal","ivbsRCC","ivbsRCCS","ivvcap","ivbss","IvbsCampIdsLocal","ivNotCD","ivvbks","ivBlk","ivdtbrk","IvbsCD","IvbsCDS"],{setValue:We,getValue:qe,removeKey:Ge,syncWithCookies:function(){["ivbsdid","IvbsCampIdsLocal"].forEach(function(e){var t;try{t=JSON.parse(P.getCookie(e))}catch(e){}var n=qe(e);t!==n&&(n?"ivbsdid"==e?P.setCookie(e,JSON.stringify({id:n}),365):P.setCookie(e,n,365):t?(t.id&&(t=t.id),We(e,t)):Ge(e))})}}),L=(le=!(ie=["ivbsdid","ivbsConsent"]),ue=b=h=0,y=d.Mode1,ve=!1,fe=function(e){if(null==e)return 0;if(!e.gdprApplies||e.hasGlobalConsent){for(var t=0;t<_.purposes.length;++t)_.purposes[t]=!0;return 2}var n=se(e),i=!0===ce(e)[436],r=oe(e);if(r instanceof Array)for(var o=0;o<m&&o<r.length;o++)_.purposes[o]=!1!==r[o]&&"false"!==r[o]&&null!=r[o];else{if("object"!=typeof r||null===r)return 0;o=0;for(a in r){if(o===m)break;r.hasOwnProperty(a)&&(_.purposes[o]=!1!==r[a]&&"false"!==r[a]&&null!=r[a],o++)}}var s=de(e);if(s instanceof Array)for(o=0;o<g&&o<s.length;o++)_.legitimateInterests[o]=!1!==s[o]&&"false"!==s[o]&&null!=s[o];else if("object"==typeof s&&null!==s){var a,o=0;for(a in s){if(o===g)break;s.hasOwnProperty(a)&&(_.legitimateInterests[o]=!1!==s[a]&&"false"!==s[a]&&null!=s[a],o++)}}return(!1!==n[436]||!1!=i)&&(null!=n&&1==n[436]||!1!=i)?2:0},pe=function(e){null!=e&&null!=(e=ae(e))&&(a.gdpr_consent=e)},he=!(I=function(e){var t,n;h=0<e?(n=e,!((t=h)<=(f=0))&&(n<=0||t<n)?t:n):e}),{setIvbsConsent:function(){h=0,f&&Ke()},iabConsentPromiseOnId:function(n,i){return re=n,new Promise(function(t){try{var e;i?(T(!(e={gdprApplies:i.GdprApplies,tcString:i.TcString,purpose:{consents:i.PurposeConsents,legitimateInterests:i.PurposeLegitimateInterests},vendor:{consents:i.VendorConsents,legitimateInterests:i.VendorLegitimateInterests}})),m=10,t(Qe(e))):null!=O.__tcfapi?(T(!1),m=10,O.__tcfapi("addEventListener",2,function(e){4<=e.tcfPolicyVersion&&(m=11),"useractioncomplete"!=e.eventStatus&&!Ye(e)||t(Qe(e))},[n])):O.context&&O.context.initialConsentValue?(T(!(e={gdprApplies:!0,tcString:O.context.initialConsentValue,purpose:{consents:{},legitimateInterests:{}},vendor:{consents:{},legitimateInterests:{}}})),m=10,t(Qe(e))):O.context&&O.context.consentSharedData&&O.context.consentSharedData.consentString?(T(!(e={gdprApplies:!0,tcString:O.context.consentSharedData.consentString,purpose:{consents:{},legitimateInterests:{}},vendor:{consents:{},legitimateInterests:{}}})),m=10,t(Qe(e))):O.ivbsAmpConsentString?(T(!(e={gdprApplies:!0,tcString:O.ivbsAmpConsentString,purpose:{consents:{},legitimateInterests:{}},vendor:{consents:{},legitimateInterests:{}}})),m=10,t(Qe(e))):t(r.NOCALL)}catch(e){B.error("IVBS: "+e),t(r.NOCALL)}})},iabConsentPromise:function(){return p=null==p?new Promise(function(e){et(null,e)}):p},initIabConsent:et,updateConsent:I,setNoCookies:Ze,getForgetFunctionParameters:Xe,normalizeString:$e,forgetFunction:function(e,t){var n;a.dom.id&&k.sendKwebStatStats(11003,a.dom.id),Ve.clear(e||o),N.jsonpWithParams(u.ewebUrl+"/User/ClearCookies",{}),n=(e=t).querySelector('[id="ivUserEmail"]'),e=e.querySelector('[id="ivUserPhone"]'),(n&&n.value||e&&e.value)&&N.jsonpWithParams(u.statwebUrl+"/Stat/DeleteUserData",Xe(t)),Ze()},hasConsent:function(){return!f&&(0===h||null==h?null:0<h)},knowsConsent:function(){return 0!==h&&null!=h},initPartnerConsentMode:function(e,t){return le?me.then(function(){return y=0==ve?tt(e):y}):(null==p&&(p=new Promise(function(e){et(null,e)})),(t=null!=t&&0!=t?L.iabConsentPromiseOnId(t):new Promise(function(e){e({})})).then(function(e){e==r.OPTINCALL&&(b=1)}),Promise.all([p,t]).then(function(){return y=0==ve?tt(e):y}))},setPartnerConsentMode:function(i){le=!0,me=new Promise(function(e,t){var n=i();null!=n?e(n):ge=e}).then(function(e){e=e||i();switch(ve=!0,parseInt(e)){case d.Mode1:I(0),b=0,y=d.Mode1;break;case d.Mode2:I(1),b=1,_.purposes[0]=!0,y=d.Mode2;break;case d.Mode3:I(1),b=1;for(var t=0;t<_.purposes.length;t++)_.purposes[t]=!0;y=d.Mode3}})},get partnerConsentMode(){return y},get noCookies(){return f},get consent(){return h},setConsent:function(e){null!=e&&0<e?P.setCookie("ivbsOptIn",e,.8333333333333333,null,!0):P.setCookie("ivbsOptIn",1,.8333333333333333,null,!0),he||(ge&&ge(),he=!0)},removeConsent:function(){Ze()},canGenerateLid:function(){return y>=d.Mode2},canGenerateCdid:function(){return y>=d.Mode2},canDoHash:function(){return y>=d.Mode2},canWriteCookies:function(){return y>=d.Mode2},canReadCookies:function(){return y>=d.Mode2}}),De=(_.SetConsent=L.setConsent,_.RemoveConsent=L.removeConsent,_.Uid={generate:function(){let e=parseInt("zzzzzz",36);function t(){return Math.floor(Math.random()*e).toString(36)}return t()+t()}},ye={cname:"ivbsdid",load:function(e){if(0==L.canReadCookies())return null;var t=S.getValue(this.cname);if(!t){t=P.getCookie(this.cname)||"";try{var n=JSON.parse(t);return n.id?n.id:n}catch(e){}}return!t&&e.BidVersion&&e.BidVersion<=7&&(n=e,e=_.Uid.generate()+"_",0<Number(n.publisherId)&&(e+=(n.publisherId>>>0).toString(16)),t=e),t},save:function(e){U.integrationType!=V.Amp&&e&&(S.setValue(this.cname,e),P.setCookie(this.cname,JSON.stringify({id:e}),365))}},function(e){if(_.dom||a.dom)return _.dom||a.dom;function t(){return be||void 0}var n=(e=e||{}).persistence||ye;be=n.load(e);return n.save(be),S.syncWithCookies(),B.info("IVBS: Did="+t()),{get id(){return t()},set id(e){be=e}}}),Ve=(Ce=null,t=[u.uwebDomain],Ie="ivNotCD",Ee=!P.getCookie(Ie),E=t.map(function(r){var o,n={};return n.get=function(n,e){if(!Ee)return B.info("IVBS: Not CD..."),void n({});var i=r+"/GetIvId",i=N.addQueryStringParam(i,"PublisherUrlId",_.videoAdContentResult.PublisherUrlId);e&&(i=N.addQueryStringParam(i,"idToSet",e)),L.canGenerateCdid()&&N.jsonpWithParams(i,{},function(t){t.mustRetry?(B.log("IVBS: retrying..."),i=N.addQueryStringParam(i,"retry",1),N.jsonpWithParams(i,{},function(e){e.optIn=e.optIn||t.optIn,e.notCD&&(B.warn("IVBS: Set as not CD!"),Ee=!1,P.setCookie(Ie,"y",365)),o=e.id,n(e)})):(o=t.id,n(t)),t.optIn<0&&t.LId&&L.canGenerateLid()&&(S.setValue("ivbsdid",t.LId),P.setCookie("ivbsdid",JSON.stringify({id:t.LId}),365),a.dom.id=t.LId),S.syncWithCookies()})},n.set=function(e,t){t&&o===t?e({}):n.get(e,t)},n.clear=function(e){var t={location:encodeURIComponent(N.getDocumentLocation()),ts:(new Date).getTime()};t.referrer=encodeURIComponent(U.referrer.substring(0,300).split(/[?#]/)[0]),a.dom.id&&(t.lid+=a.dom.id),N.jsonpWithParams(r+"/NoIvId",t,e)},n.getOptIn=function(e){if(!Ee)return B.info("IVBS: Not CD..."),void e({});N.jsonpWithParams(r+"/GetOptIn",null,e)},n}),we={getId:function(n){var i=0,r=function(){var e=E[i];e?e.get(function(t){t.id?(n(t),E.forEach(function(e){e.set(o,t.id)})):(i++,r())}):n({})};r()},clear:function(e){function t(){0===--n&&e()}var n=E.length;E.forEach(function(e){e.clear(t)})},getOptIn:function(t){function n(e){0===--i&&t(e)}var i=E.length;E.forEach(function(e){e.getOptIn(n)})}},{detectUserId:function(t){var n;!0!==L.hasConsent()||O.ivbsIdLess||!0===D.userManager?t&&t():(n=!(D.userManager=!0),O.setTimeout(function(){n||(B.warn("IVBS: Cookie mechanism timeout/error."),t())},1e3),!1===L.knowsConsent()?we.getOptIn(function(e){n=!0,null!=e&&null!=e.Data&&e.Data.OptIn<0&&L.setNoCookies(),t&&t()}):we.getId(function(e){n=!0,Ce=_.id=e.id,B.info("IVBS: CDid="+Ce),t()}))},clear:function(e){we.clear(e),Ce=null,_.id&&delete _.id},get id(){return Ce||_.id}}),k=(!function(){function i(){}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function r(n,i){for(;3===n._state;)n=n._value;0===n._state?n._deferreds.push(i):(n._handled=!0,o._immediateFn(function(){var e,t=1===n._state?i.onFulfilled:i.onRejected;if(null===t)(1===n._state?s:a)(i.promise,n._value);else{try{e=t(n._value)}catch(e){return void a(i.promise,e)}s(i.promise,e)}}))}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void d(t);if("function"==typeof n)return void l((i=n,r=e,function(){i.apply(r,arguments)}),t)}t._state=1,t._value=e,d(t)}catch(e){a(t,e)}var i,r}function a(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)r(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}var e,t;e=this,t=setTimeout,o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(i);return r(this,new c(e,t,n)),n},o.all=function(e){var a=Array.prototype.slice.call(e);return new o(function(r,o){if(0===a.length)return r([]);for(var s=a.length,e=0;e<a.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if("function"==typeof i)return i.call(e,function(e){t(n,e)},o)}a[n]=e,0==--s&&r(a)}catch(e){o(e)}}(e,a[e])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(n){return new o(function(e,t){t(n)})},o.race=function(r){return new o(function(e,t){for(var n=0,i=r.length;n<i;n++)r[n].then(e,t)})},o._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){t(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=o:e.Promise||(e.Promise=o),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){for(var t=0;t<this.length;t++)if(e(this[t]))return t}),navigator.userAgent.match(/MSIE |Trident/i)&&((EventClass=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=F.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}).prototype=O.Event.prototype)}(),{sendPageViewEvent:function(){a.sentPageView||(a.sentPageView=!0,nt("/Stat/PvPixel",null,null,null))},sendFallbackPresent:function(e){nt("/statPixel",e?-1041:-41,a.PageId)},sendStatwebStats:function(e,t,n){nt("/statPixel",e,t,n)},sendKwebStatStats:function(e,t,n){nt("/Stat/AdvertiserPixel",e,t,n,u.kwebstatUrl)}}),Re=function(e,t){function n(){B.info("widget html added to page"),_.dispatchEvent("ivbsWidgetRendered"),c(_.monitoredDiv),d(_.monitoredDiv),l()}function i(t){var e;null!=t&&((_.sewebResult=t).AdvertiserFormattingHtml?(e=F.createElement("div"),F.body.appendChild(e),N.setInnerHtmlWithScripts(e,t.AdvertiserFormattingHtml)):B.warn("There is no Advertiser Formatting Html to display"),new Promise(function(e,t){var n,i="Widget container not found",r=F.getElementById(o);r?e(r):N.isDocumentReady()?t(i):n=O.setInterval(function(){N.isDocumentReady()&&(O.clearInterval(n),(r=F.getElementById(o))?e(r):t(i))},100)}).then(function(e){r=e,t.WidgetHtml?N.setInnerHtmlWithScripts(e,t.WidgetHtml,n):B.warn("There is no Widget Html to display")}).catch(function(e){B.error("Widget cannot be rendered in "+o+" : "+e)}))}var r,o="divIvbsWidget",s=e,a=t,d=function(e){Me({target:e||r,checkpoints:[95],useVisiApi:!0,onCheckpointReached:function(e,t){s.sendAdvertiserEvent(3600,t)}})},c=function(e){function t(e,t,n,i,r){e&&Me({target:e,duration:n,continuous:r,checkpoints:[i],onCheckpointReached:function(){s.sendAdvertiserEvent(t)}})}t(e=e||r,3601,1e3,50,!0),t(e,3602,2e3,50,!0)},l=function(){var e=_.isTablet?901:900,t=_.isTablet?904:903,n=!1;_.handleAdSwipe=function(){s.sendAdvertiserEvent(n?t:e),_.dispatchEvent(n?"firstSwipe":"swipe"),n=!0}};return{run:function(){N.jsonpWithParams(u.sewebUrl+"/Analytics",{t:a},i)}}},Me=function(t){function o(t){Object.keys(d).filter(function(e){return e<=t}).forEach(function(e){d[e].disable(),delete d[e]})}function s(){var e;c.length&&(e=c[c.length-1],t.onCheckpointReached.call(null,e.checkpointPercent,e.totalDuration),c=[])}function n(e){var n,i,r=e?-1:U.getVerticalVisibilityPercent(t.target);Object.keys(d).forEach(function(e){var t=d[e];t.update(r),t.done&&(n=e,i=t.totalDuration)}),-1<n&&(e=parseInt(n,10),a&&O.clearTimeout(a),o(n),0<t.debounceRate&&0<Object.keys(d).length?(c.push({checkpointPercent:e,totalDuration:i}),a=O.setTimeout(s,t.debounceRate)):t.onCheckpointReached.call(null,e,i))}function e(){_.visibilityAPI.isVisible()?n():n(!0)}var a,d={},c=[],i=1==t.useVisiApi&&null!=_.visibilityAPI;return t.checkpoints.sort().forEach(function(e){d[e]=new it(e,t,n)}),_.addEventListener("scrollresize",n),i&&F.addEventListener(_.visibilityAPI.eventName,e),n(),{stop:function(){_.removeEventListener("scrollresize",n),o(101),i&&F.removeEventListener(_.visibilityAPI.eventName,e)}}};_.OverlaySwiper=function(t){function n(){r.classList.contains("ivbsMinimised")||(_.widgetStats.sendAdvertiserEvent(3610),r.classList.add("ivbsMinimised"),t.update(100),t.startAutoplay())}function i(e){e.stopPropagation(),e.preventDefault(),r.classList.contains("ivbsMinimised")&&(_.widgetStats.sendAdvertiserEvent(3611),r.classList.remove("ivbsMinimised"),t.update(100),t.stopAutoplay())}var r=F.getElementById("ivbsWidgetContainer"),e=r.querySelector(".ivbsPageOverlay"),o=r.querySelector(".ivbsCloseIcon"),s=r.querySelector(".iv-swiper-container"),a=r.querySelector(".ivbsExpandIcon"),d=(t.stopAutoplay(),o.addEventListener("click",function(){d()}),function(){r.classList.contains("ivbsMinimised")?(r.style.display="none",_.widgetStats.sendAdvertiserEvent(3612)):n()});s.addEventListener("click",function(e){i(e)}),a.addEventListener("click",function(e){i(e)}),e.addEventListener("click",function(){n()}),setTimeout(function(){O.addEventListener("scroll",function(e){n()})},1500)},_.trySendPuid=function(t){t&&"function"==typeof t&&ke.add(function(){var e;0!=L.canDoHash()&&null!=(e=t())&&("string"==typeof e||e instanceof String)&&""!=e&&k.sendKwebStatStats(11010,e)},"purpose1")},_.trySendHash=function(t){t&&"function"==typeof t&&ke.add(function(){var e;0!=L.canDoHash()&&null!=(e=t())&&("string"==typeof e||e instanceof String)&&""!=e&&k.sendKwebStatStats(11014,e)},"purpose1")},_.getCookie=P.getCookie,(_.VideoQuartileReporter=function(d){(d=d||{}).tolerance=d.tolerance||3;var c=this,l=0;this.videoElement=d.videoElement,this.checkpoints=d.checkpoints||[0,25,50,75,99],d.report=d.report||function(e){d.adManager.sendAdvertiserEventId(3700+e,d.videoElement.src)},this.handleTimerEvents=function(){var e=c.videoElement.currentTime,t=d.duration||parseInt(c.videoElement.getAttribute("data-qduration"))||c.videoElement.duration;if(!isNaN(t)){for(var n,i=rt(e)+" / "+rt(t),r=(c.videoElement.__currentTimeString!==i&&d.adManager&&((n=d.adManager.adDiv.getElementsByClassName("ivbsTimerPlaceholder"))&&n.length&&(n[0].innerHTML=i),c.videoElement.__currentTimeString=i),Math.floor(100*e/t)),o=-1,s=0;s<c.checkpoints.length;s++){var a=c.checkpoints[s];if(!(a<l)){if(a>=r+d.tolerance)break;o=s}}0<=o&&(n=c.checkpoints[o],c.checkpoints.splice(o,1),d.report(n)),l=r}},this.handleEndedEvent=function(){for(var e=0;e<c.checkpoints.length;e++){var t=c.checkpoints[e];d.report(t)}c.checkpoints=[]},this.videoElement.addEventListener("timeupdate",this.handleTimerEvents),this.videoElement.addEventListener("ended",this.handleEndedEvent)}).prototype.destroy=function(){this.videoElement.removeEventListener("timeupdate",this.handleTimerEvents),this.videoElement.removeEventListener("ended",this.handleEndedEvent)},(_.VideoCheckpointReporter=function(t){var n=this;n.active=!0,n.videoElement=t.videoElement,t.report=t.report||function(){t.adManager.stats.sendAdvertiserEventId(t.eventType,t.videoId)},n.handleTimerEvents=function(){var e=n.videoElement.currentTime;e>=t.checkPoint&&n.active&&(n.active=!1,B.logWithTimestamp("send event options.eventType at "+e),n.videoElement.removeEventListener("timeupdate",n.handleTimerEvents),t.report())},n.videoElement.addEventListener("timeupdate",n.handleTimerEvents)}).prototype.destroy=function(){this.videoElement.removeEventListener("timeupdate",this.handleTimerEvents)},(O.invibes=O.invibes||{}).InlinePlayer=(t="undefined"==typeof Symbol?function(e){return"@"+(e||"@")+Math.random()}:Symbol,Ae=/iPhone|iPod|iPad/i.test(navigator.userAgent),C=t(),Pe=t(),Se=t("nativeplay"),Le=t("nativepause"),(w=[]).i=0,ft.isWhitelisted=Ae,function(e,t){t&&e.setAttribute("src",t);t=null===e.getAttribute("muted");return Ae&&ft(e,t),{videoElement:e,play:function(){return this.videoElement.play()},pause:function(){return this.videoElement.pause()},isPaused:function(){return this.videoElement.paused},isMuted:function(){return this.videoElement.muted},mute:function(){this.videoElement.muted=!0,this.videoElement.volume=0},unmute:function(){this.videoElement.muted=!1,this.videoElement.volume=1},toggleSound:function(){this.isMuted()?this.unmute():this.mute()}}});_.Play=_.FullPlay=function(d){function t(){var e,t;C&&(C=!1,B.debug("IVBS: IPlay heated"),g&&R(),x()),I&&p.currentAd.ElementIABDuration<=c.currentTime&&(d.visiPercent=p.currentAd.MinVideoVisiPercentToPlay,I=!1,x()),c.currentTime>=h&&!a&&(a=!0,p.stats.sendAdvertiserEventId(1e3),y&&!I&&(d.forever=!0,V())),E&&(e=Object.keys(E)[0])&&(t=parseInt(e),c.currentTime>=t&&(E[e](),p.stats.sendAdvertiserEventId(1400,t),delete E[e]))}function n(){o&&o.destroy(),s&&s.destroy(),l&&l.destroy(),i.isPaused()||i.pause(),clearTimeout(r),_.removeEventListener("scrollresize",playInstance.scrollResizeHandler),O.removeEventListener("touchend",playInstance.scrollResizeHandler),E=null,A.forEach(function(e){e()})}var e,i,c,r,l,o,s,u,a,v,f=this,p=(H(f),d.adManager||(d.video,e=new Promise(function(e){_resolvePlayReadyPromise=e}),(T={get playReadyPromise(){return e},resolvePlayPromise:_resolvePlayReadyPromise}).adDiv=F.getElementById("ivbsWidgetContainer"),T.currentAd={},T.stats={},T.stats.sendAdvertiserEventId=function(e,t){_.widgetStats.sendAdvertiserEvent(e,t)},H(T),T)),m=d.video,g=d.forcedPause||!1,h=p.currentAd.VideoCompletionTime,b=p.currentAd.VideoDurationInvoiceBase,y=p.currentAd.PlayVAfterC,I=p.currentAd.PlayVOnIabSettings,E=null,C=(d.topMargin=d.topMargin||0,d.bottomMargin=d.bottomMargin||0,d.visiPercent=p.currentAd.MinVideoVisiPercentToPlay||d.visiPercent||0,I&&(d.visiPercent=p.currentAd.ElementIABPercent||0),d.forever=1==p.currentAd.PlayForeverAfterView||d.forever,!0),w=!1,A=(m.volume=0,m.muted=!0,m.setAttribute("playsinline",""),[]),P=function(e,t,n){e.addEventListener(t,n),A.push(function(){e.removeEventListener(t,n)})},S=function(t){N.pixel(t).catch(function(e){B.info("IVBS: error loading pixel with url "+t+"because of "+e)})},L=function(){k(),u&&u()},k=function(){null==o&&(o=new _.VideoQuartileReporter({videoElement:c,adManager:p,report:function(e){var t=d.id||c.getAttribute("data-ivVidId")||c.getAttribute("src");B.log(["IVBS: QUARTILE",t,e]),p.stats.sendAdvertiserEventId(3700+e,"bv_"+t)}})),null==s&&b&&(s=new _.VideoQuartileReporter({duration:b,adManager:p,videoElement:c,report:function(e){var t=d.id||c.getAttribute("data-ivVidId")||c.getAttribute("src");B.log(["IVBS: inv QUARTILE",t,e]),p.stats.sendAdvertiserEventId(1500+e,"bv_"+t)}})),null==v&&(v=new _.VideoCheckpointReporter({videoId:"bv_"+(d.id||c.getAttribute("data-ivVidId")||c.getAttribute("src")),adManager:p,videoElement:c,checkPoint:6,eventType:3706}))},T=new Promise(function(s){var a,t,e=d.vastUrl||d.vpaidUrl;e?(e=N.replaceTimestamp(e),(a=new _.VastParser(e)).initialize(function(){d.vpaidUrl?new _.VPAIDPlayer((t={video:m,fileSettings:a.vpaidFile,params:a.adParams,eventHandler:p.stats.sendAdvertiserEventId,vpaidHasRedirect:void 0!==d.vpaidHasRedirect&&d.vpaidHasRedirect,noLoop:d.noLoop,indexVideoOnFinish:d.indexVideoOnFinish,adManager:p},d.vpaidConfig&&"object"==typeof d.vpaidConfig&&Object.keys(d.vpaidConfig).forEach(function(e){d.vpaidConfig.hasOwnProperty(e)&&(t[e]=d.vpaidConfig[e])}),t)).then(function(e){C=!1,s({player:e,video:e.timedVideo})}):(m.setAttribute("src",a.mediaFile.src),s({player:new _.InlinePlayer(m),video:m}));var t,e,n=!1,i=(u=function(){if(!n&&a.impressionUrls){for(var e=0;e<a.impressionUrls.length;e++)S(a.impressionUrls[e]);n=!0}var i;i=a.quartiles,null==l&&(l=new _.VideoQuartileReporter({videoElement:c,adManager:p,report:function(e){var t=i[e];if(t)for(var n=0;n<t.length;n++)S(t[n])},checkpoints:Object.getOwnPropertyNames(i)}))},a.clickThroughUrl);if(i&&(d.vastRedirectLinkId&&(e=F.getElementById(d.vastRedirectLinkId))&&"A"===e.nodeName&&p.initializeOutgoingLink(e,i),d.vastRedirectLinkClass)){var r=p.adDiv.getElementsByClassName(d.vastRedirectLinkClass);if(null!=r&&0<r.length)for(var o=0;o<r.length;o++)r[o]&&"A"===r[o].nodeName&&p.initializeOutgoingLink(r[o],i)}p.addClickTrackers(a.clickTrackingUrls)})):(t=new _.InlinePlayer(m),m.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA||/iPhone|iPod|iPad/i.test(navigator.userAgent)?s({player:t,video:m}):m.addEventListener("loadeddata",function e(){m.removeEventListener("loadeddata",e),s({player:t,video:m})}))}),D=function(){var e=d.inViewTarget||m,e=(m&&1==p.currentAd.IABVisiAppliesToEntireAd&&(e=p.adDiv),U.getBoundingClientRect(e));if(e.height<1||e.width<1)return!1;if(m.forcedVisibilityPercent>=d.visiPercent)return!0;var t=Math.ceil((100-d.visiPercent)*e.height/100),n=_.headerHeight+d.topMargin-t,t=U.windowHeight-_.footerHeight-d.bottomMargin+t;return e.top>=n&&e.bottom<=t},V=function(){null==i||g||(L(),i.isPaused()&&(B.debug("IVBS: IPlay started"),i.play()))},R=function(){i.isPaused()||(B.debug("IVBS: IPlay paused"),i.pause())},M=function(){var e;C||((e=D())&&(w=!0,V()),i.isPaused()||e||(d.forever||d.playOnView)&&w&&!I||R())},x=function(){clearTimeout(r),r=setTimeout(function(){M()},150),M()};return(f.playerReadyPromise=T).then(function(e){i=e.player,c=e.video,d.toggleMuteBtn&&(e=new _.ToggleMute({player:i,adManager:p,container:m.parentElement,toggleMuteBtn:d.toggleMuteBtn}),f.mute=e.mute,f.unmute=e.unmute,e.addEventListener("mute",function(){f.dispatchEvent("mute")}),e.addEventListener("unmute",function(){f.dispatchEvent("unmute")})),d.fullscreen&&(d.fullscreen.adManager=p,new _.Fullscreen(f,d.fullscreen).init()),d.draggable&&(d.draggable.adManager=p,new _.Draggable(f,d.draggable).init()),d.noLoop||null!=d.vpaidUrl||P(m,"ended",function(){m.currentTime=0,m.play()}),d.picAfterPlay&&(d.picAfterPlayTime?c.addEventListener("timeupdate",function(){c.currentTime>d.picAfterPlayTime&&p.adDiv.classList.add("ivbsVideoEnded")}):P(c,"ended",function(){p.adDiv.classList.add("ivbsVideoEnded")})),P(c,"timeupdate",t),_.addEventListener("scrollresize",x),O.addEventListener("touchend",x),p.addEventListener("beforeEngagement",n),p.resolvePlayPromise(f),null!=d.vpaidUrl&&!d.heatupVideo||(e=i.play())&&e.then(function(){x()}).catch(function(e){B.warn("IVBS: "+e)}),d.playOnView&&(e=function(){w=!0,V()},p.viewed?e():p.addEventListener("view",e)),x()}),f.getPlayer=function(){return i},f.destroy=n,f.addVideoTracking=function(e){(E=null==E?{}:E)[e.time]=e.tracking},f.forcePause=function(){g=!0,R()},f.resume=function(){g=!1,x()},f},_.ToggleMute=function(e){var t,n=this,i=e.toggleMuteBtn,r=e.player,o=e.adManager,s=e.container,a="ivbsToggleMute",d="ivbsToggleUnmute",c=(H(n),n.unmute=function(){o.videoZoomed=!0,o.stats.sendAdvertiserEventId(t?3621:3620),t=!0,r.unmute(),i.classList.remove(a),i.classList.add(d),s.classList.add("ivFlashyMaxi"),"function"==typeof r.resize&&r.resize(),this.dispatchEvent("unmute")},n.mute=function(){delete o.videoZoomed,r.mute(),i.classList.add(a),i.classList.remove(d),s.classList.remove("ivFlashyMaxi"),"function"==typeof r.resize&&r.resize(),this.dispatchEvent("mute")},n.destroy=function(){i.removeEventListener("click",c),_.visibilityAPI&&F.removeEventListener(_.visibilityAPI.eventName,muteIfPageNotVisible)},function(e){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),r&&(o.videoZoomed?n.mute():n.unmute())});i.classList.add(a),i.addEventListener("click",c),_.visibilityAPI&&F.addEventListener(_.visibilityAPI.eventName,function(){_.visibilityAPI.isVisible()||n.mute()})},_.OverlayPlayer=function(e){var t,n=F.getElementById("ivbsWidgetContainer"),i=n.querySelector(".ivbsPageOverlay"),r=n.querySelector(".ivbsCloseIcon"),o=n.querySelector(".ivbsVideoContainer"),s=(r.addEventListener("click",function(e){s(e)}),function(e){e.preventDefault(),e.stopPropagation(),n.classList.contains("ivbsMinimised")?(_.widgetStats.sendAdvertiserEvent(3612),t.forcePause(),n.style.display="none"):(_.widgetStats.sendAdvertiserEvent(3610),n.classList.add("ivbsMinimised"),t.mute())});i.addEventListener("click",function(){n.classList.contains("ivbsMinimised")||(_.widgetStats.sendAdvertiserEvent(3610),n.classList.add("ivbsMinimised"),t.mute())}),o.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),n.classList.contains("ivbsMinimised")?(_.widgetStats.sendAdvertiserEvent(3611),n.classList.remove("ivbsMinimised"),t.unmute()):(_.widgetStats.sendAdvertiserEvent(3610),n.classList.add("ivbsMinimised"),t.mute())}),setTimeout(function(){t=new _.FullPlay(e),O.addEventListener("scroll",function(e){n.classList.contains("ivbsMinimised")||(_.widgetStats.sendAdvertiserEvent(3610),n.classList.add("ivbsMinimised"),t.mute())})},1500)},_.VoteAndSurf=function(e){var t=F.getElementById("ivbsWidgetContainer"),n=F.querySelector(".ivbsLiveResultsContainer"),i=F.querySelector(".ivbsVotesNr");_.sewebResult.BvOptVotes.opt1||(_.sewebResult.BvOptVotes.opt1=0),_.sewebResult.BvOptVotes.opt2||(_.sewebResult.BvOptVotes.opt2=0);var r=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&(n+=parseFloat(e[t]));return n}(_.sewebResult.BvOptVotes),t=(i.innerHTML=r,_.sewebResult.BvOptVotes.opt1>_.sewebResult.BvOptVotes.opt2?t.classList.add("ivbs-result-option1"):_.sewebResult.BvOptVotes.opt1<_.sewebResult.BvOptVotes.opt2?t.classList.add("ivbs-result-option2"):_.sewebResult.BvOptVotes.opt1===_.sewebResult.BvOptVotes.opt2&&t.classList.add("ivbs-result-option1"),i=r<=e.minVotesNr?(n.style.display="none",{min:0,callback:function(e){return(e/r*100).toFixed(0)+"%"},padding:0,fontFamily:e.xAxesFontFamily,fontStyle:e.xAxesFontStyle,fontColor:e.xAxesFontColor}):{min:0,userCallback:function(e,t,n){if(Math.floor(e)===e)return e},padding:0,fontFamily:e.xAxesFontFamily,fontStyle:e.xAxesFontStyle,fontColor:e.xAxesFontColor},F.getElementById("myChart"));new Chart(t,{type:"horizontalBar",data:{labels:e.labels,datasets:[{label:e.datasetLabel,data:e.data,backgroundColor:e.bgColors,barThickness:e.barThickness}]},options:{tooltips:{enabled:!1},hover:{mode:null},responsive:e.responsive,maintainAspectRatio:e.maintainAspectRatio,scales:{yAxes:[{gridLines:e.yAxesGridLines,ticks:{beginAtZero:!0,padding:10,fontFamily:e.yAxesFontFamily,fontStyle:e.yAxesFontStyle,fontColor:e.yAxesFontColor}}],xAxes:[{gridLines:e.xAxesGridLines,ticks:i}]},layout:e.layout,legend:e.legend}})},A.startAnalytics()}function xe(){return"10000000100040008000100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}function Oe(e,t,n){var i=e.indexOf("?")<0?"?":"&";return e+i+t+"="+n}function Fe(e,t){var n,i=e;if(t)for(var r in t)t.hasOwnProperty(r)&&(null==(n=t[r])&&(n=""),i=Oe(i,encodeURIComponent(r),encodeURIComponent(n)));return i}function _e(e,t){var n,i,r,o=j(t);for(n in o)o.hasOwnProperty(n)&&(i=new RegExp(""+n,"g"),r=o[n],e=e.replace(i,r));return e}function Be(){return q=null==q?N.parseQueryStringParams():q}function Ue(){H(_),a.listenToScroll||(a.listenToScroll=!0,e=function(){function e(){_.dispatchEvent("scrollresize","poll")}var t;return{start:function(){t||(B.info("IVBS: Scrollpoll start"),t=O.setInterval(e,200))},stop:function(){t&&(B.info("IVBS: Scrollpoll stop"),O.clearInterval(t),t=null)}}}(),t=function(){e.stop(),_.dispatchEvent("scroll"),_.dispatchEvent("scrollresize","scroll")},n=O,i&&i.removeEventListener("scroll",t),i!==n&&(i=n,e.start(),i.addEventListener("scroll",t),_.dispatchEvent("scrollParentChanged",_,[n]))),_.videoAdContentResult={PublisherUrlId:0},L.setIvbsConsent();var e,t,n,i=$().then(function(e){return e.DefaultAnswer||X(e.BlockingScript),G=e});return i.then(function(){var e=1==u.consentCheck;if(1==_.hasProprietaryConsentValue||null!=P.getCookie("ivbsOptIn")?L.setPartnerConsentMode(function(){return P.getCookie("ivbsOptIn")}):Z(e?3:2),0!=e){if(_.VisitTrackingReferrer)if(Array.isArray(_.VisitTrackingReferrer))for(var t=0;t<_.VisitTrackingReferrer.length;t++)-1<U.referrer.indexOf(_.VisitTrackingReferrer[t])&&(l=!0,_invibesReferrerDetectionMethod=R.Redirect);else-1<U.referrer.indexOf(_.VisitTrackingReferrer)&&(l=!0,_invibesReferrerDetectionMethod=R.Redirect);e=_.VisitTrackingURLParam||[],(e=Array.isArray(e)?e:[e]).push("invibes"),e=e.map(function(e){return e.toLowerCase()}),l=l||(e=e,n=O.location.href.replace(O.location.origin,"").toLowerCase(),(e=e.some(function(e){return-1<n.indexOf(e)}))&&(_invibesReferrerDetectionMethod=R.UrlParam),e);var n,e=L.initPartnerConsentMode(G.InvibesType,G.AdvertiserVendorConsentId);return e.then(function(){var e;Q&&(!a.dom.id&&L.canGenerateLid()&&(e=_.Uid.generate(),S.setValue("ivbsdid",e),P.setCookie("ivbsdid",JSON.stringify({id:e}),365),a.dom.id=e),Ve.detectUserId(function(){!0===L.hasConsent()&&k.sendKwebStatStats(8)}))}),Promise.race([e,K(500)])}}).then(function(){var e;return _.optIn=L.consent,ke.set(!0),a.dom=_.dom=new De,P.setCookie("ivbsConsent",!0),!a.dom.id&&L.canGenerateLid()&&(e=_.Uid.generate(),S.setValue("ivbsdid",e),P.setCookie("ivbsdid",JSON.stringify({id:e}),365),a.dom.id=e),a.userIdPromise=a.userIdPromise=new Promise(function(e){Ve.detectUserId(e)}),a.userIdPromise}).catch(function(e){B.warn("IVBS: Error in promise chain",e)})}function H(o){var s={};o.triggeredEvents=o.triggeredEvents||{},o.addEventListener=function(e,t){t.constructor===Function&&(s[e]=s[e]||[],s[e].push(t))},o.addEventListenerReactive=function(e,t){if(t.constructor===Function){if(o.triggeredEvents[e])return t();s[e]=s[e]||[],s[e].push(t)}},o.removeEventListener=function(e,t){e=s[e]||[],t=e.indexOf(t);-1<t&&e.splice(t,1)},o.dispatchEvent=function(e,t,n){o.triggeredEvents[e]=!0;var i,r=(s[e]||[]).slice(0);for(i in r)if(r.hasOwnProperty(i))try{r[i].apply(t,n||[])}catch(e){B.error(e)}}}function Ne(e){for(var t,n,i=F.cookie.split(";"),r=0;r<i.length;r++)if(t=i[r].substr(0,i[r].indexOf("=")),n=i[r].substr(i[r].indexOf("=")+1),(t=t.replace(/^\s+|\s+$/g,""))===e)return unescape(n)}function He(e,t,n,i){var r,o;L&&L.noCookies&&!("IvbsCampIdsLocal"==e||e==v||"ivbsOptIn"==e)&&0<=(n||0)||(i=i||te.cookieDomain,o=24*(n=365<n?365:n)*60*60*1e3,(r=new Date).setTime(r.getTime()+o),o=t+(n?"; expires="+r.toUTCString():""),U.integrationType===V.Script&&"ivbsdid"!=e||(o+=";samesite=none",-1<O.location.protocol.indexOf("https")&&(o+=";secure")),F.cookie=e+"="+(o+=";domain="+i+";path=/"))}function ze(e,t,n,i,r){r?He(e,t,n,i):ke.add(function(){0!=L.canWriteCookies()&&He(e,t,n,i)},0<=["ivbsdid","ivbsConsent"].indexOf(e)?"purpose1":0<=["VsLLocal","IvbsCampIdsLocal","ivbsRCC","ivbsRCCS","ivvcap","ivbss","IvbsCampIdsLocal","ivNotCD","ivvbks","ivBlk","ivdtbrk","IvbsCD","IvbsCDS"].indexOf(e)?"special":"purpose")}function je(){var e=location.hostname.split(".");if(1===e.length)return location.hostname;for(var t=e.length-1;0<=t;t--){var n="."+e.slice(t).join(".");if(ze(v,v,1,n,!0),Ne(v)===v)return ze(v,v,-1,n,!0),n}return null}function We(t,n,i){ke.add(function(){var e;0!=L.canWriteCookies()&&(null==i?localStorage.setItem(t,n):((e=new Date).setDate(e.getDate()+i),localStorage.setItem(t,JSON.stringify({value:n,expiration:e.getTime()}))))},0<=ie.indexOf(t)?"purpose1":0<=ne.indexOf(t)?"special":"purpose")}function qe(e){var t=localStorage.getItem(e);try{var n=JSON.parse(t);return null!=n.expiration?(new Date).getTime()<n.expiration?n.value:(Ge(e),null):t}catch(e){return t}}function Ge(e){O.localStorage.removeItem(e)}function Qe(e){if(null==e)return r.NOCALL;if(!e.gdprApplies||e.hasGlobalConsent)return r.OPTINCALL;var t=oe(e);if(t instanceof Array){if(t.length<m)return r.OPTOUTCALL;for(var n=0;n<m;n++)if(!1===t[n]||"false"===t[n]||null==t[n])return r.OPTOUTCALL}else{if("object"!=typeof t||null===t)return r.NOCALL;var i,n=0;for(i in t){if(n===m)break;if(t.hasOwnProperty(i)&&(n++,!1===t[i]||"false"===t[i]||null==t[i]))return r.OPTOUTCALL}if(1!=t[1])return r.OPTOUTCALL}return null==(e=se(e))?r.OPTINCALL:null==e[re]?r.NOCALL:1!=e[re]?r.OPTOUTCALL:r.OPTINCALL}function Je(e,t){var n=fe(e);0<n&&I(n),e&&(a.gdpr_applies=e.gdprApplies,a.gdpr_isProcessed=t,pe(e),I(n))}function Ke(){"IvbsCampIdsLocal|VSVASuspended|ivNotCD|VsLLocal|ivbss|ivbsdid|ivBlk|ivvbks|ivdtbrk|ivbsIL|ivSkipLoad|ivbspd|ivbsOptIn|ivbsConsent".split("|").forEach(function(e){P.setCookie(e,"",-1)}),"ivbsdid|IvbsCDS|IvbsCampIdsLocal|ivSkipLoad|ivbspd|ivbsOptIn|ivbsConsent".split("|").forEach(function(e){S.removeKey(e)})}function Ze(){Ke(),h=0,f=1}function Xe(e){var t={},n=e.querySelector('[id="ivUserEmail"]');return n&&n.value?(n=$e(n.value,"email"),n=sjcl.codec.hex.fromBits(sjcl.hash.sha256.hash(n)).toUpperCase(),t.hashedEmail=n):(n=e.querySelector('[id="ivUserPhone"]'))&&n.value&&(e=$e(n.value,"phone"),n=sjcl.codec.hex.fromBits(sjcl.hash.sha256.hash(e)).toUpperCase(),t.hashedPhone=n),t.cpi=Y.cpi,F.referrer&&(t.referrer=F.referrer.substring(0,300).split(/[?#]/)[0]),t}function $e(e,t){return e=e.trim(),"phone"===t?e=(e=e.replace("+","00")).replace(/[^0-9]/g,""):"email"===t&&(e=e.replace(/\s\r\n\t]/g,"")),e}function T(e){f&&Ke(),oe=function(e){return null!=e.purpose?e.purpose.consents:{}},se=function(e){return null!=e.vendor?e.vendor.consents:{}},ce=function(e){return null!=e.vendor?e.vendor.legitimateInterests:{}},de=function(e){return null!=e.purpose?e.purpose.legitimateInterests:{}},e&&(ae=function(e){return null!=e.tcString?e.tcString:""})}function Ye(e){return(e=oe(e))instanceof Array?0!=e.length:"object"==typeof e&&null!==e&&0!=Object.keys(e).length}function et(t,n){try{var e;t?(e={gdprApplies:t.GdprApplies,tcString:t.TcString,purpose:{consents:t.PurposeConsents,legitimateInterests:t.PurposeLegitimateInterests},vendor:{consents:t.VendorConsents,legitimateInterests:t.VendorLegitimateInterests}},T(!0),g=m=10,Je(e,!0),n()):null!=O.__tcfapi?(T(!0),g=m=10,O.__tcfapi("addEventListener",2,function(e){null!=e?(4<=e.tcfPolicyVersion&&(g=m=11),Je(e,!0),"useractioncomplete"!=e.eventStatus&&!Ye(e)||n()):ue<5&&(ue++,setTimeout(function(){et(t,n)},500))},[436])):O.context&&O.context.initialConsentValue?(e={gdprApplies:!0,tcString:O.context.initialConsentValue,purpose:{consents:{},legitimateInterests:{}},vendor:{consents:{},legitimateInterests:{}}},T(!0),Je(e,!(g=m=10)),n()):O.context&&O.context.consentSharedData&&O.context.consentSharedData.consentString?(e={gdprApplies:!0,tcString:O.context.consentSharedData.consentString,purpose:{consents:{},legitimateInterests:{}},vendor:{consents:{},legitimateInterests:{}}},T(!0),Je(e,!(g=m=10)),n()):O.ivbsAmpConsentString?(e={gdprApplies:!0,tcString:O.ivbsAmpConsentString,purpose:{consents:{},legitimateInterests:{}},vendor:{consents:{},legitimateInterests:{}}},T(!0),Je(e,!(g=m=10)),n()):setTimeout(function(){et(t,n)},500)}catch(e){B.error("IVBS: "+e),n()}}function tt(e){var t=0<h,n=0<b;switch(e){case 0:return d.Mode1;case 1:return n&&1==_.purposes[0]?d.Mode2:d.Mode1;case 2:return n&&t&&1==_.purposes[0]?d.Mode3:d.Mode1;case 3:if(n){if(t&&1==_.purposes[0])return d.Mode3;if(1==_.purposes[0])return d.Mode2}return d.Mode1;default:return d.Mode1}}function nt(e,t,n,i,r=u.statwebUrl){try{var o,s={location:N.getDocumentLocation(),additionalInfo:n,vId:a.visitId,PlacementVisitId:_?.placementVisitId??0,lId:a?.dom?.id??null,c:N.getRootDomain(),handshakeId:L.partnerConsentMode==d.Mode2||L.partnerConsentMode==d.Mode3?P.getCookie("handIid")??null:null};-1<e.indexOf("PvPixel")&&(o="",o=a.dom.gdpr_isProcessed?_.getAcceptedPurposeIds(!1):"{0}",s.additionalInfo+="|"+o,null!=a.dom.gdpr_consent&&(s.Tc=a.dom.gdpr_consent),s.TcNotProc=!a.dom.gdpr_isProcessed),null!=t&&(s.actionType=t),s.referrer=F.referrer,Ve.id&&(s.cookie=Ve.id),Y&&Y.cpi&&(s.CPI=Y.cpi),s.ModeType=L.partnerConsentMode,N.pixel(r+e,s).then(i)}catch(e){B.log("IVBS: "+e)}}function it(i,r,o){function s(){a&&O.clearTimeout(a)}function e(){t(),v=!0,o()}var a,d=!1,c=0,l=0,u=(new Date).getTime(),v=!1,f=r.duration||99999,t=function(){O.removeEventListener("beforeunload",e),O.removeEventListener("pagehide",e)};return null!=r.duration&&0!=r.duration||(O.addEventListener("beforeunload",e),O.addEventListener("pagehide",e)),{get done(){return d},get totalDuration(){return Math.round(c/100)/10},get targetPercent(){return i},update:function(e){if(s(),!d){var t,n=(new Date).getTime();if(i<=l){if(f<=(c+=n-u))return void(d=1)}else r.continuous&&(c=0);1==v?d=1:(i<=e&&(t=f-c,a=O.setTimeout(o,t)),u=n,l=e)}},disable:function(){s(),t()}}}function rt(e){return Math.floor(e/60)+":"+("0"+Math.floor(e)%60).slice(-2)}function ot(t){var n=void 0,i=void 0;function r(e){n=requestAnimationFrame(r),t(e-(i||e)),i=e}this.start=function(){n||r(0)},this.stop=function(){cancelAnimationFrame(n),n=null,i=0}}function st(t,e,n,i){function r(e){Boolean(t[n])===Boolean(i)&&e.stopImmediatePropagation(),delete t[n]}t.addEventListener(e,r,!1)}function at(e,t,n,i){function r(e){n[t]=e}i&&r(e[t]),Object.defineProperty(e,t,{get:function(){return n[t]},set:r})}function dt(e,t,n){(w.tue||0)+200<Date.now()&&(e[Pe]=!0,w.tue=Date.now()),n||(e.currentTime=t),w[++w.i%3]=100*t|0}function ct(e){return e.driver.currentTime>=e.video.duration}function lt(){var e=this,t=e[C];e.webkitDisplayingFullscreen?e[Se]():("data:"!==t.driver.src&&t.driver.src!==e.src&&(dt(e,0,!0),t.driver.src=e.src),e.paused&&(t.paused=!1,e.buffered.length||e.load(),t.driver.play(),t.updater.start(),e.dispatchEvent(new Event("play")),e.dispatchEvent(new Event("playing"))))}function ut(e){var t=this,n=t[C];n.driver.pause(),n.updater.stop(),t.webkitDisplayingFullscreen&&t[Le](),n.paused&&!e||(n.paused=!0,t.dispatchEvent(new Event("pause")),t.ended&&(t[Pe]=!0,t.dispatchEvent(new Event("ended"))))}function vt(t){var e,n,i=t[C]={paused:!0,hasAudio:!0};i.video=t,i.updater=new ot(function(e){var t=this;t.video.readyState>=t.video.HAVE_FUTURE_DATA?(t.hasAudio||(t.driver.currentTime=t.video.currentTime+e*t.video.playbackRate/1e3,t.video.loop&&ct(t)&&(t.driver.currentTime=0)),dt(t.video,t.driver.currentTime)):t.video.networkState===t.video.NETWORK_IDLE&&t.video.load(),t.video.ended&&t.video.pause(!0)}.bind(i)),i.driver=(e=t,(n=new Audio).crossOrigin=e.crossOrigin,n.src=e.src||e.currentSrc||"data:",n),t.addEventListener("emptied",function(){var e=!i.driver.src||"data:"===i.driver.src;i.driver.src&&i.driver.src!==t.src&&(dt(t,0,!0),i.driver.src=t.src,e?i.driver.play():i.updater.stop())},!1),t.addEventListener("webkitbeginfullscreen",function(){t.paused?i.driver.buffered.length||i.driver.load():(t.pause(),t[Se]())}),t.addEventListener("webkitendfullscreen",function(){i.driver.currentTime=t.currentTime}),t.addEventListener("seeking",function(){w.indexOf(100*t.currentTime|0)<0&&(i.driver.currentTime=t.currentTime)})}function ft(e,t,n){var i;t=void 0===t||t,(n=void 0===n||n)&&!Ae||e[C]||(vt(e),i=(n=e)[C],n[Se]=n.play,n[Le]=n.pause,n.play=lt,n.pause=ut,at(n,"paused",i.driver),at(n,"muted",i.driver,!0),at(n,"playbackRate",i.driver,!0),at(n,"ended",i.driver),at(n,"loop",i.driver,!0),st(n,"seeking"),st(n,"seeked"),st(n,"timeupdate",Pe,!1),st(n,"ended",Pe,!1),e.classList.add("IIV"),!t&&e.autoplay&&e.play())}}(window,document,window.invibes=window.invibes||{});