define("ui.scrollToError",["ytos.domlib"],function(a){return yTos.utils.namespace("yTos.helpers.UI.ScrollToError"),yTos.helpers.UI.ScrollToError=function(){var b=yTos.helpers.base.extend({name:"ui.scrollToError",defaults:{typeOfAnimation:"swing",millisecondsOfAnimation:500,offsetFromFirstInvalidInput:20,fixedHeaderOffset:0,focusOnInputDesktop:!0},initialize:function(){this.whoScrolls=!1,this.$html=a("html, body"),this.settings=a.extend(!0,{},this.defaults,this.getStoreConfiguration())},events:{},globalMessages:{"yTos::AjaxForm::ScrollToErrorReady":"scrollToErrorReady","yTos::ScrollToError::InsideLayerInputNotOnScreen":"insideLayerNotOnScreen","yTos::ScrollToError::InsidePageInputNotOnScreen":"insidePageInputNotOnScreen"},getStoreConfiguration:function(){try{var b=yTos.navigation.Controller.toLowerCase(),c={};return yTos.configuration.ui&&yTos.configuration.ui.scrollToError&&(c=yTos.configuration.ui.scrollToError[b]?a.extend(!0,c,yTos.configuration.ui.scrollToError["default"],yTos.configuration.ui.scrollToError[b]):yTos.configuration.ui.scrollToError["default"]),c}catch(d){return{}}},scrollToErrorReady:function(a){var b=a.parents(".uiLayer"),c=a.find(".invalid, .warning").first();"hidden"===c.attr("type")&&(c=c.parent());var d=this.isOnScreen(c);d?c.focus():b.length>0?$Y.notify("yTos::ScrollToError::InsideLayerInputNotOnScreen",{layerContainer:b,firstInputWithAnError:c}):$Y.notify("yTos::ScrollToError::InsidePageInputNotOnScreen",c)},isOnScreen:function(b){var c={};c.top=a(window).scrollTop(),c.bottom=c.top+a(window).height();var d={};return d.top=b.offset().top,d.bottom=d.top+b.outerHeight(),d.top<=c.bottom&&d.bottom>=c.top+this.settings.fixedHeaderOffset},scrollToError:function(a,b){var c=this.getPosition(a.get(0)).y,d=this.getPosition(b.get(0)).y;this.whoScrolls!==!1&&(c=this.getPosition(this.whoScrolls.get(0)).y),this.whoScrolls===!1&&(c=b.offset().top,d=0);var e=Math.abs(c-d);a.stop().animate({scrollTop:e-this.settings.offsetFromFirstInvalidInput-this.settings.fixedHeaderOffset},this.settings.millisecondsOfAnimation,this.settings.typeOfAnimation,function(){this.settings.focusOnInputDesktop&&!$Y.utils.hasTouchEvents()&&b.focus()}.bind(this))},insideLayerNotOnScreen:function(a){var b=this.getScrollableContainer(a.layerContainer);b?this.scrollToError(b,a.firstInputWithAnError):this.scrollToError(this.$html,a.firstInputWithAnError)},insidePageInputNotOnScreen:function(a){this.scrollToError(this.$html,a)},getScrollableContainer:function(a){var b=a,c=a.find(".mfp-container"),d=a.find(".mfp-content"),e=a.find(".inner");return this.whoScrolls=!1,this.hasScrollableLayer(b)?(this.whoScrolls=b,this.whoScrolls):this.hasScrollableLayer(c)?(this.whoScrolls=c,this.whoScrolls):this.hasScrollableLayer(d)?(this.whoScrolls=d,this.whoScrolls):this.hasScrollableLayer(e)?(this.whoScrolls=e,this.whoScrolls):this.whoScrolls},hasScrollableLayer:function(a){return!!a.get(0)&&a.get(0).scrollHeight>a.innerHeight()},getPosition:function(a){for(var b=0,c=0;a;)b+=a.offsetLeft-a.scrollLeft+a.clientLeft,c+=a.offsetTop-a.scrollTop+a.clientTop,a=a.offsetParent;return{x:b,y:c}}});return $Y.notify("yTos::HelperParsed::ui.scrollToError",b),new b}(),$Y.notify("yTos::HelperLoaded::ui.scrollToError",yTos.helpers.UI.ScrollToError),yTos.helpers.UI.ScrollToError});