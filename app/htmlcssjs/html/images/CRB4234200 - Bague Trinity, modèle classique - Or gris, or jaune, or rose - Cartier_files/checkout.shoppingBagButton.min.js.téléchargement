define([],(function(){"use strict";return yTos.utils.namespace("yTos.helpers.Checkout.ShoppingBagButton"),yTos.helpers.Checkout.ShoppingBagButton=yTos.helpers.base.extend({initialize:function(){},refreshAfterInitialization:function(){this.update()},events:function(){const t={click:"onClick",mouseenter:"notifyMouseEnter",mouseleave:"yTos::Checkout::ShoppingBagButtonMouseLeave"};return this.options.shouldBehaveAsLink&&(t["button click"]="redirectToCartPage"),t},globalMessages:{"yTos::Account::UserLoggedIn":"update","yTos::Account::UserLoggedOut":"update","yTos::Checkout::RemoveItemSuccess":"update","yTos::Checkout::ItemQuantityUpdated":"update","yTos::Item::ItemAddedToShoppingBag":"update","yTos::Product::ProductAddedToShoppingBag":"update","yTos::Checkout::MoveItemToWishListSuccess":"update","yTos::Checkout::ShowMiniCart":"activate","yTos::Checkout::HideMiniCart":"deactivate","yTos::Checkout::SetPromocodeSuccess":"update","yTos::Checkout::RemovePromocodeSuccess":"update"},onClick:function(){this.notify("yTos::Checkout::ShoppingBagButtonClicked",{shouldBehaveAsLink:this.options.shouldBehaveAsLink,itemsInCart:this.getProductsCount()})},notifyMouseEnter:function(){this.notify("yTos::Checkout::ShoppingBagButtonMouseEnter",{itemsInCart:this.getProductsCount()})},getProductsCount:function(){return this.$("[data-ytos-products-count]").yTos("products-count")},redirectToCartPage:function(){location.href=this.options.shoppingBagUrl},activate:function(){this.$el.addClass("is-active"),this.$("button").attr("aria-expanded","true")},deactivate:function(){this.$el.removeClass("is-active"),this.$("button").attr("aria-expanded","false")},update:function(){this.getHTML({Plugin:"Checkout",Action:"RenderShoppingBagButtonAsync"},{data:this.options,success:function(){this.notify("yTos::Checkout::ShoppingBagButtonUpdated")}.bind(this),stripMe:!0,autoUpdate:!0})}}),yTos.helpers.Checkout.ShoppingBagButton}));