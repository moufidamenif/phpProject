define(["ui.layer"],(function(){return yTos.utils.namespace("yTos.helpers.Common.ContentLoader"),yTos.helpers.Common.ContentLoader=yTos.helpers.base.extend({initialize:function(){if(!this.scope)throw"common.contentLoader can't be instantiated without a scope"},events:function(){return this.options.customTrigger?{"[data-ytos-custom-trigger] click":"loadContent"}:{click:"loadContent"}},localMessages:function(){const t={};return this.scope&&(t[this.options.onLoad]="renderContent"),t},loadContent:function(t){if(t.preventDefault(),this.options.selector)return this.notify(this.options.onLoad,{html:this.$(this.options.selector).html()},{scope:this.scope});const o={stripMe:!1,autoUpdate:!1};this.options.cache&&(o.cache=!0),this.options.data&&"object"==typeof this.options.data&&(o.data=this.options.data),o.success=function(t){this.options.hash&&$Y.setHash(this.options.hash),this.notify(this.options.onLoad,{html:t},{scope:this.scope})}.bind(this),this.options.onError&&(o.error=function(t){this.notify(this.options.onError,{html:t},{scope:this.scope})}.bind(this)),this.getHTML(this.options.route,o)},renderContent:function(t){t.cssClasses=this.options.classes?this.options.classes:[this.scope],this.notify("yTos::OpenLayer",t)}}),yTos.helpers.Common.ContentLoader}));